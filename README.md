# MVC React Demo

This document has been auto-generated by Claude Sonnet 4.

A demonstration of **Model-View-Controller (MVC)** architecture pattern implemented with modern React technologies and feature-based organization.

## 🏗️ Architecture Overview

This project showcases an **industry-standard feature-based MVC architecture** in React:

### **Feature-Based Organization**

- **Posts Feature**: Complete CRUD operations with UUID-based IDs
- **Users Feature**: User management and display
- **Shared Infrastructure**: Reusable types, services, and utilities

### **Model Layer**

- **Types**: TypeScript interfaces in `src/shared/types/`
- **API Services**: Axios-based API client in `src/shared/services/`
- **Data Logic**: Centralized API calls with UUID support

### **View Layer**

- **Components**: Feature-specific UI components
- **Pages**: Top-level page components in `src/pages/`
- **Presentation Logic**: Pure UI components with Material-UI

### **Controller Layer**

- **Custom Hooks**: Business logic in each feature's controllers
- **TanStack Query**: Server state management with caching
- **State Coordination**: Manages data flow and user interactions

## 🛠️ Tech Stack

- **React** v19 - Modern React with hooks and concurrent features
- **TypeScript** v5 - Strict type safety and advanced type patterns
- **Material-UI** v7 - Comprehensive component library with theming
- **TanStack Query** v5 - Powerful server state management
- **Axios** v1 - HTTP client with interceptors
- **UUID** v13 - Unique identifier generation for posts
- **Jest** v30 - Testing framework with MSW integration
- **React Testing Library** - Component testing utilities
- **MSW** v2 - Mock Service Worker for API testing
- **Vite** v7 - Fast build tool and development server
- **Yarn** v4 - Modern package manager with PnP

## 🚀 Getting Started

### Prerequisites

- Node.js (v20 or higher)
- Yarn 4

### Installation

1. Install dependencies:

   ```bash
   yarn install
   ```

2. Start the development server:

   ```bash
   yarn dev     # Start with mock API (default)
   yarn build   # Build for production
   yarn test        # Run test suite
   ```

3. Open your browser and navigate to `http://localhost:5173` (or the next available port)

## 🔶 Mock API & UUID Implementation

This project includes a **Mock Service Worker (MSW)** setup with **UUID-based post IDs** that simulates a real API environment.

### Key Features

- **UUID v4 Post IDs**: All posts use unique string identifiers (server-generated)
- **Artificial Delays**: 1000ms delays simulate real network conditions
- **Full CRUD Operations**: Create, read, update, delete with proper validation
- **Test Environment**: Separate test handlers with mocked UUIDs
- **Type Safety**: Complete TypeScript coverage for UUID transitions

### UUID Implementation

- **Server-side Generation**: UUIDs generated in MSW handlers (realistic approach)
- **String-based IDs**: Migrated from numeric to UUID string identifiers
- **Test Compatibility**: Jest mocks handle UUID generation consistently
- **Production Ready**: Architecture supports real API UUID implementation

### Development vs Production

```bash
yarn dev     # Mock API with UUIDs and delays
yarn test        # Test suite with mocked UUIDs
yarn build   # Production build (ready for real API)
```

### Mock Data

The mock API provides:

- **5 Posts** with UUID identifiers and realistic content
- **2 Users** with complete profile information
- **Full CRUD Support** for posts with optimistic updates
- **Error Scenarios** for comprehensive testing

### Testing Infrastructure

- **Separate Test Handlers**: Isolated mock environment for tests
- **UUID Mocking**: Consistent `'mocked-uuid-v4'` for predictable tests
- **Jest Integration**: MSW configured for seamless test execution

## 📁 Project Structure

```
src/
├── features/               # Feature-based organization
│   ├── posts/             # Posts feature (complete CRUD)
│   │   ├── create/        # Post creation logic
│   │   ├── delete/        # Post deletion logic
│   │   ├── edit/          # Post editing logic
│   │   ├── get/           # Post fetching logic
│   │   └── view/          # Post display components
│   └── users/             # Users feature
│       ├── get/           # User fetching logic
│       └── view/          # User display components
├── shared/                # Shared infrastructure
│   ├── services/          # API client and HTTP logic
│   └── types/             # TypeScript type definitions
├── pages/                 # Top-level page components
│   └── PostsPage.tsx      # Main posts management page
├── mocks/                 # MSW mock API setup
│   ├── handlers.ts        # Development mock handlers
│   ├── testHandlers.ts    # Test-specific handlers
│   └── data.ts           # Mock data definitions
├── test/                  # Test configuration
│   ├── setup.ts          # Jest and MSW setup
│   ├── utils.tsx         # Test utilities
│   └── __mocks__/        # Jest mocks (UUID, etc.)
├── App.tsx               # Main application component
└── main.tsx              # Application entry point
```

## 🔄 MVC Implementation Details

### Model Layer (`src/shared/types/`, `src/shared/services/`)

- **Types**: Defines data structures with UUID support (Post, User, API responses)
- **API Service**: Centralized HTTP client with interceptors and error handling
- **Data Validation**: TypeScript ensures type safety across UUID transitions

### View Layer (`src/features/*/view/`, `src/pages/`)

- **Feature Components**: Organized by business domain (posts, users)
- **Pure Presentation**: Components receive data and callbacks, no business logic
- **Material-UI**: Consistent design system with responsive layouts

### Controller Layer (`src/features/*/controllers/`, `src/features/*/hooks/`)

- **Feature Controllers**: Business logic encapsulated within each feature
- **TanStack Query**: Handles caching, background updates, and optimistic updates
- **UUID Handling**: Manages server-generated vs client-side ID strategies

## 🧪 Testing

Run the test suite:

```bash
yarn test                # Run all tests
yarn test:coverage # Run with coverage report
```

### Test Architecture

- **MSW Integration**: Mock Service Worker for API testing
- **UUID Mocking**: Predictable UUID generation in tests
- **Feature Testing**: Tests organized by feature domains
- **Integration Tests**: End-to-end workflows with realistic interactions

## 📋 Available Scripts

### Development

- `yarn dev` - Start development server with mock API
- `yarn build` - Build for production
- `yarn preview` - Preview production build

### Testing

- `yarn test` - Run Jest test suite
- `yarn typecheck` - Run TypeScript compiler check

### Code Quality

- `yarn lint` - Run ESLint
- `yarn lint:fix` - Fix ESLint issues automatically

## 🌟 Features

### Posts Management (UUID-based)

- **View Posts**: Responsive grid layout with post cards
- **Create Posts**: Form validation with server-generated UUIDs
- **Edit Posts**: Inline editing with optimistic updates
- **Delete Posts**: Confirmation dialogs with rollback support
- **Real-time Updates**: TanStack Query cache synchronization

### Advanced Architecture

- **Feature-based Organization**: Scalable structure by business domain
- **UUID Implementation**: Industry-standard unique identifiers
- **Error Boundaries**: Comprehensive error handling and user feedback
- **Loading States**: Skeleton loaders and progressive disclosure
- **Type Safety**: Full TypeScript coverage with strict configuration

## 🎯 Learning Objectives

This demo demonstrates:

1. **Feature-based Architecture**: Organizing code by business domain rather than technical layers
2. **MVC Pattern in React**: Proper separation between Model, View, and Controller responsibilities
3. **UUID Implementation**: Server-side ID generation patterns and client-side handling
4. **Advanced TypeScript**: Generic types, utility types, and strict type safety
5. **Modern React Patterns**: Custom hooks, compound components, and context patterns
6. **Testing Strategies**: MSW integration, UUID mocking, and feature-based test organization
7. **State Management**: Server state vs client state with TanStack Query

## 🔄 Data Flow

```
User Interaction (View)
    ↓
Feature Controller (Custom Hook)
    ↓
TanStack Query (Cache Layer)
    ↓
API Service (Model)
    ↓
MSW Handler (Mock API)
    ↓
UUID Generation (Server-side)
    ↓
Response with UUID (Model)
    ↓
Cache Update (Controller)
    ↓
Component Re-render (View)
```

## 🏗️ Architecture Highlights

### Industry-Standard Patterns

- **Feature-based Organization**: Scales with team size and project complexity
- **Separation of Concerns**: Clear MVC boundaries with TypeScript enforcement
- **Server-side ID Generation**: Realistic API patterns with UUID implementation

### Modern React Best Practices

- **Custom Hooks**: Business logic abstraction and reusability
- **TanStack Query**: Sophisticated server state management
- **MSW Testing**: Reliable API mocking without network dependencies

## 🤝 Contributing

This is a demo project, but feel free to:

- Report issues
- Suggest improvements
- Fork and experiment
- Use as a learning resource

## 📄 License

MIT License - feel free to use this project for learning and development.
